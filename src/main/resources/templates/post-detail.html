<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:v-on="http://www.w3.org/1999/xhtml">
<head>
    <div th:replace="layout :: head"></div>
    <link rel="stylesheet" th:href="@{custom-assets/css/post-detail.css}">
    <link rel="stylesheet" th:href="@{custom-assets/css/modal.css}">
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
    <link href="assets/css/flex-slider.css" rel="stylesheet" type="text/css"/>
    <script async defer
            src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAT1IHF1gT-MK8Dsac6-9jeYv_pVjYuDyk&libraries=places">
    </script>
    <title>Chi tiết bài đăng</title>
</head>
<body>

<!--    include confirm modal-->
<div th:replace="layout :: confirm-modal"></div>

<!--    include message modal-->
<div th:replace="layout :: message-modal"></div>

<!--    inlude loading screen-->
<div th:replace="layout :: loader"></div>

<!--    include header-->
<header th:replace="layout :: header"></header>

<main>
    <div class="container-fluid">
        <div id="postDetailBody" class="main-content">
            <div class="row">
                <div class="col-left">
                    <div class="grid images_3_of_2">
                        <div class="flexslider">
                            <ul class="slides">
                                <li v-for="image of listImage" class="slide-image-container">
                                    <img v-bind:src="image"/>
                                </li>
                            </ul>
                        </div>
                    </div>
                    <div class="wish-list clearfix">
                        <button v-if="userInfo == null || userInfo.role == 'RENTER'" class="btn-save"
                                v-on:click="showModalReport()" type="button" title="Báo cáo">
                            <img src="assets/img/logo/alert.png">
                            <span>Báo cáo</span>
                        </button>
                        <button v-if="(userInfo == null || userInfo.role == 'RENTER')"
                                class="btn-save" v-on:click="handleActionWishList(post)" type="button"
                                v-bind:title="listPostOfRenter.some(p => p.id == post.id) ? 'Bỏ lưu tin' : 'Lưu tin này'">
                            <img src="assets/img/logo/bookmark.png">
                            <span v-text="listPostOfRenter.some(p => p.id == post.id) ? 'Bỏ lưu tin' : 'Lưu tin này'"></span>
                        </button>
                    </div>
                    <div class="title-area clearfix">
                        <h1 class="title" v-text="post.title"></h1>
                    </div>
                    <div class="overview clearfix">
                        <div class="title-name">
                            <span>Đặc điểm chung:</span>
                        </div>
                        <div class="content clearfix">
                            <ul class="list-overview clearfix">
                                <li class="item">
                                    <span class="item-name"><img class="icon-post-detail"
                                                                 src="assets/img/logo/house.png"> Loại phòng:</span>
                                    <span class="item-value" v-text="post.type"></span>
                                </li>
                                <li class="item">
                                    <span class="item-name"><img class="icon-post-detail"
                                                                 src="assets/img/logo/money.png"> Giá cho thuê:</span>
                                    <span class="item-value"
                                          v-text="authenticationInstance.formatNumberToDisplay(post.price) + ' VNĐ/Tháng'"></span>
                                </li>
                                <li class="item">
                                    <span class="item-name"><img class="icon-post-detail"
                                                                 src="assets/img/logo/square.png"> Diện tích:</span>
                                    <span class="item-value" v-text="post.square + 'M&sup2'"></span>
                                </li>
                                <li class="item">
                                    <span class="item-name"><img class="icon-post-detail"
                                                                 src="assets/img/logo/distance.svg"> Khoảng cách:</span>
                                    <span class="item-value" v-text="post.distance + ' KM'"></span>
                                </li>
                            </ul>
                        </div>
                    </div>
                    <div class="description clearfix">
                        <div class="title-name">
                            <span>Thông tin mô tả:</span>
                        </div>
                        <div class="description-content">
                            <p v-text="post.description"></p>
                        </div>
                    </div>
                    <div class="location clearfix">
                        <div class="title-name">
                            <span>Vị trí:</span>
                        </div>
                        <div class="address">
                            <span class="subtext">
                                <i class="fas fa-map-marker-alt"></i>
                                {{post.address}}
                            </span>
                        </div>
                        <div class="map" id="map-canvas">
                        </div>
                    </div>

                    <!-- Load Facebook SDK for JavaScript -->
                    <div id="fb-root"></div>
                    <script>(function (d, s, id) {
                        var js, fjs = d.getElementsByTagName(s)[0];
                        if (d.getElementById(id)) return;
                        js = d.createElement(s);
                        js.id = id;
                        js.src = "https://connect.facebook.net/en_US/sdk.js#xfbml=1&version=v3.0";
                        fjs.parentNode.insertBefore(js, fjs);
                    }(document, 'script', 'facebook-jssdk'));</script>
                    <!-- share Facebook -->
                    <div id="btn-share-fb" class="share clearfix">
                        <div class="title-name">
                            <span>Chia sẻ:</span>
                            <!-- Your share button code -->
                            <div class="fb-share-button"
                                 v-bind:data-href="getURL()"
                                 data-layout="button_count">
                            </div>
                        </div>
                    </div>
                    <div class="report clearfix" v-if="userInfo == null || userInfo.role == 'RENTER'">
                        <div class="report-area">
                            <p>
                                <strong>Lưu ý:</strong>
                                </br>Mọi thông tin trên website chỉ mang tính chất tham khảo. Chúng tôi luôn cố gắng
                                cung cấp các thông tin đầy đủ,
                                chính xác và minh bạch đến người xem, tuy nhiên quá trình kiểm duyệt vẫn có thể xảy ra
                                sơ sót. Vì vậy rất mong
                                nhận được sự đóng góp, phản ánh của các bạn để thông tin chính xác hơn.
                            </p>
                            <button class="btn-report" v-on:click="showModalReport()" type="button" id="btnReport">
                                <img src="assets/img/logo/alert.png">
                                <span>Báo Cáo</span>
                            </button>
                            <div id="reportModal" class="modal">
                                <!-- Modal content -->
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h2>Báo Cáo Bài Viết</h2>
                                        <span id="closeModalReport" @click="closeModalReport()"
                                              class="close">&times;</span>
                                    </div>
                                    <div class="modal-body">
                                        <h4 class="font-weight-normal">Nội dung</h4>
                                        <textarea v-model="reportContent"></textarea>
                                    </div>
                                    <div class="modal-footer">
                                        <button id="modalReportAcceptBtn" @click="showModalConfirmSendReport()"
                                                class="btn-default">Xác Nhận
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-right">
                    <div class="information-header">
                        <div class="display clearfix">
                            <div class="display-avatar">
                                <img src="assets/img/logo/ava.png">
                            </div>
                            <div class="display-name">
                                <span class="name-value" v-text="post.landlordDisplayName"></span>
                                <span class="date-value" v-text="'Ngày đăng: ' + post.createDate"></span>
                            </div>
                        </div>
                        <div class="sent-request" v-if="userInfo == null || userInfo.role == 'RENTER'">
                            <button @click="showModalChooseRoom()" class="btn btn-danger">Gửi Yêu Cầu</button>
                        </div>

                        <!--Modal choose room-->
                        <div id="myModal_chooseRoom" class="modal">
                            <!-- Modal content -->
                            <div class="view-information">
                                <div class="modal-header">
                                    <h2>Chọn phòng</h2>
                                    <span @click="closeModalChooseRoom" class="close">&times;</span>
                                </div>
                                <div class="modal-body">
                                    <div class="room-number">
                                        <div class="title-room">
                                            <h4 class="font-weight-normal">Chọn phòng:</h4>
                                        </div>
                                        <div class="choose-room clearfix">
                                            <ul class="list-select-room" v-for="room in listRoomOfPost">
                                                <li class="select-room"
                                                    v-bind:class="{disable : room.statusId == 2, selected: room.roomId == roomIdRental}"
                                                    @click="setRoomIdRental(room.roomId, $event)">
                                                    {{room.roomName}}
                                                </li>
                                            </ul>
                                            <!--                                            <div @click="setRoomIdRental(room.roomId)" class="select-room"-->
                                            <!--                                                 v-text="room.roomName"></div>-->
                                        </div>
                                    </div>
                                    <div class="room-number">
                                        <div class="title-room">
                                            <h4 class="font-weight-normal">Ngày bắt đầu:</h4>
                                        </div>
                                        <div class="choose-room">
                                            <input @input="setRequestDateRental($event.target.value)" type="date">
                                        </div>
                                    </div>
                                </div>
                                <div class="modal-footer">
                                    <button @click="showModalConfirmSentRental()" class="btn-hover btn-default">Xác
                                        Nhận
                                    </button>
                                </div>
                            </div>
                        </div>

                        <div class="contact">
                            <h4 class="font-weight-bold-contact">Liên hệ với chủ trọ: </h4>
                            <h3 v-text="post.phoneNumber"></h3>
                        </div>
                    </div>
                    <div class="news-involve">
                        <div class="header-news">
                            <span>Có thể bạn quan tâm:</span>
                        </div>
                        <div class="list-news-content">
                            <ul class="list-news clearfix">
                                <li class="news" v-for="relatedPost in relatedPosts">
                                    <a class="post-link clearfix" v-bind:href="'/post-detail?id=' + relatedPost.id">
                                        <figure class="thumb">
                                            <img v-bind:src="relatedPost.listImage[0]">
                                        </figure>
                                        <div class="infor">
                                            <div class="inner">
                                                <span class="title-news" v-text="relatedPost.title" data-toggle="tooltip" data-placement="bottom" v-bind:title="relatedPost.title"></span>
                                                <div class="clearfix">
                                                    <div class="price">
                                                        <span v-text="authenticationInstance.formatNumberToDisplay(relatedPost.price) + ' VNĐ/Tháng'"></span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </a>
                                </li>
                                <!--                                <li class="news">-->
                                <!--                                    <a class="post-link clearfix" href="#">-->
                                <!--                                        <figure class="thumb">-->
                                <!--                                            <img src="assets/img/rooms/cohuong4.jpg">-->
                                <!--                                        </figure>-->
                                <!--                                        <div class="infor">-->
                                <!--                                            <div class="inner">-->
                                <!--                                                <span class="title-news">Phòng trọ sinh viên giá rẻ có gác</span>-->
                                <!--                                                <div class="clearfix">-->
                                <!--                                                    <div class="price">-->
                                <!--                                                        <span>1500000 vnđ/tháng</span>-->
                                <!--                                                    </div>-->
                                <!--                                                </div>-->
                                <!--                                            </div>-->
                                <!--                                        </div>-->
                                <!--                                    </a>-->
                                <!--                                </li>-->
                                <!--                                <li class="news">-->
                                <!--                                    <a class="post-link clearfix" href="#">-->
                                <!--                                        <figure class="thumb">-->
                                <!--                                            <img src="assets/img/rooms/cohuong3.jpg">-->
                                <!--                                        </figure>-->
                                <!--                                        <div class="infor">-->
                                <!--                                            <div class="inner">-->
                                <!--                                                <span class="title-news">Phòng trọ sinh viên giá rẻ có gác, thang máy giờ tự do</span>-->
                                <!--                                                <div class="clearfix">-->
                                <!--                                                    <div class="price">-->
                                <!--                                                        <span>1500000 vnđ/tháng</span>-->
                                <!--                                                    </div>-->
                                <!--                                                </div>-->
                                <!--                                            </div>-->
                                <!--                                        </div>-->
                                <!--                                    </a>-->
                                <!--                                </li>-->
                                <!--                                <li class="news">-->
                                <!--                                    <a class="post-link clearfix" href="#">-->
                                <!--                                        <figure class="thumb">-->
                                <!--                                            <img src="assets/img/rooms/cohuong2.jpg">-->
                                <!--                                        </figure>-->
                                <!--                                        <div class="infor">-->
                                <!--                                            <div class="inner">-->
                                <!--                                                <span class="title-news">Phòng trọ sinh viên giá rẻ có gác, thang máy giờ tự do</span>-->
                                <!--                                                <div class="clearfix">-->
                                <!--                                                    <div class="price">-->
                                <!--                                                        <span>1500000 vnđ/tháng</span>-->
                                <!--                                                    </div>-->
                                <!--                                                </div>-->
                                <!--                                            </div>-->
                                <!--                                        </div>-->
                                <!--                                    </a>-->
                                <!--                                </li>-->
                                <!--                                <li class="news">-->
                                <!--                                    <a class="post-link clearfix" href="#">-->
                                <!--                                        <figure class="thumb">-->
                                <!--                                            <img src="assets/img/rooms/cohuong1.jpg">-->
                                <!--                                        </figure>-->
                                <!--                                        <div class="infor">-->
                                <!--                                            <div class="inner">-->
                                <!--                                                <span class="title-news">Phòng trọ sinh viên giá rẻ có gác, thang máy giờ tự do</span>-->
                                <!--                                                <div class="clearfix">-->
                                <!--                                                    <div class="price">-->
                                <!--                                                        <span>1500000 vnđ/tháng</span>-->
                                <!--                                                    </div>-->
                                <!--                                                </div>-->
                                <!--                                            </div>-->
                                <!--                                        </div>-->
                                <!--                                    </a>-->
                                <!--                                </li>-->
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <!---Modal-->
            <div th:replace="layout :: confirmModalFragment"></div>
            <div th:replace="layout :: notification"></div>
        </div>
    </div>
    <!--    <div class="ads-left">-->
    <!--        <img src="assets/img/logo/banner.jpg">-->
    <!--    </div>-->
    <!--    <div class="ads-right">-->
    <!--        <img src="assets/img/logo/banner.jpg">-->
    <!--    </div>-->

</main>

<footer th:replace="layout :: footer"></footer>
<div th:replace="layout :: js-fragment"></div>
<script th:src="@{/assets/js/main.js}"></script>
<!--<script type="text/javascript" th:src="@{/assets/js/jquery-2.1.4.min.js}"></script>-->
<!--<script th:src="@{/assets/js/imagezoom.js}"></script>-->
<script th:src="@{/assets/js/jquery.flexslider.js}"></script>
<script th:src="@{/assets/js/flexslider.js}"></script>
<script type="text/javascript" th:src="@{/custom-assets/vue-js/post-detail.js}"></script>

</body>
</html>